import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
import "prismjs/components/prism-erlang";

export const theme = vsDark;

# Julia's Child
Fine, French Programming

<Notes>
- These are speaker notes
- And they won't be rendered in your slide
</Notes>

---

# Start with "Why?"

---

# Start with "Why?"
<!-- Should be able to use a step tag but code surfer is broken -->
Why do we use programming languages

<Notes>
- Do things faster
- Repetitive
- Parallelization
</Notes>

---

# Start with "Why?"

Why do we use programming languages
- Do things faster

---

# Start with "Why?"

Why do we use programming languages
- Do things faster
- Repetitive tasks

---

# Start with "Why?"

Why do we use programming languages
- Do things faster
- Repetitive tasks
- Parallel work

---

# Start with "Why?"

Why should we consider another language

---

# Start with "Why?"

Why should we consider another language
- "Sharpen the saw"
- Solve the "two-language" problem

<Notes>
- One language for proof of concept
- One language for efficiency
</Notes>

---

<Notes>
- 3rd problem is generality
</Notes>

<CodeSurferColumns themes={[vsDark, github]}>

<Step title="The two language problem">

```c
#include <stddef.h>
double c_sum(size_t n, double *X) {
    double s = 0.0;
    for (size_t i = 0; i < n; ++i) {
        s += X[i];
    }
    return s;
}
```

<div>
<h1>Performance</h1>
C, Fortran, Assembly
</div>

</Step>

<Step title="The two language problem">

```python
def py_sum(A):
    s = 0.0
    for a in A:
        s += a
    return s
```

<div>
<h1>Prototyping</h1>
Python, Ruby, MATLAB
</div>

</Step>

</CodeSurferColumns>

---

looks like **python**, runs like **C**

---

# Runs like C

<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle displaystyle="true">
    <mrow class="MJX-TeXAtom-ORD">
      <mi>s</mi>
      <mi>u</mi>
      <mi>m</mi>
      <mo stretchy="false">(</mo>
      <mi>a</mi>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <munderover>
        <mo movablelimits="false">&#x2211;</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
        </mrow>
        <mrow class="MJX-TeXAtom-ORD">
          <mi>n</mi>
        </mrow>
      </munderover>
      <mrow class="MJX-TeXAtom-ORD">
        <msub>
          <mi>a</mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mi>i</mi>
          </mrow>
        </msub>
      </mrow>
    </mrow>
  </mstyle>
</math>

- C: 10 ms
- python: 500 ms
- julia: 10 ms

<Notes>
- 10 million element vector
</Notes>

---

<CodeSurfer>

<!-- Using the Erlang syntax highlighting because Prism's julia one is bad -->
```python title="Looks like python"
def sum(a):
    s = 0.0
    for x in a:
        s += x
    return s
```

```erlang title="Looks like python" subtitle="Julia version"
function sum(a)
    s = 0.0
    for x in a
        s += x
    end
    return s
end
```

</CodeSurfer>

---

# How can we do this?

```js
console.log(3);
alert("hey");
```

---

# Celeste Project

---

# Celeste Project
- Sloan Digital Sky Survey data
- 178 Terabytes of data

---

# Celeste Project
- 9300 KNL nodes at NERSC
- 188 million stars/galaxies
- < 15 minutes of run time
- 1.54 petaflops
- 1.3 million threads

<Notes>
- 3rd language to bypass petaflops
- FORTRAN and C
</Notes>

---

# Why use Julia for Celeste?

<Notes>
- same language for whole team
- subject matter expert vs computer scientist
</Notes>

---

<CodeSurfer>

<!-- Using the Erlang syntax highlighting because Prism's julia one is bad -->
```erlang title="Getting Started"
my_answer = 42
typeof(my_answer)
# Int64

my_pi = 3.14159
typeof(my_pi)
# Float64

my_str = "Some string"
typeof(my_str)
# String

println("I'm excited to learn Julia!")

# using single line comments like this

#=
  using multiline comments
  can be done
  like this
=#

sum = 3 + 7

difference = 10 - 3

product = 20 * 5

quotient = 100 / 10

power = 10 ^ 2

modulus = 101 % 2
```

<!-- show int -->
```diff 1:3 subtitle="Assigning Integers"

```
<!-- show float -->
```diff 5:7 subtitle="Assigning Floats"

```
<!-- show string -->
```diff 9:11 subtitle="Assinging Strings"

```
<!-- show print -->
```diff 13 subtitle="How to Print"

```
<!-- show comment -->
```diff 15 subtitle="How to comment"

```
<!-- show multiline comment -->
```diff 17:21 subtitle="How to comment on multiple lines"

```
<!-- show sum -->
```diff 23 subtitle="Addition operator"

```
<!-- show subtraction -->
```diff 25 subtitle="Subtraction operator"

```
<!-- show multiply -->
```diff 27 subtitle="Multiplication operator"

```
<!-- show division -->
```diff 29 subtitle="Division operator"

```
<!-- show exponent -->
```diff 31 subtitle="Power operator"

```
<!-- show modulo -->
```diff 33 subtitle="Modulus operator"

```

```erlang title="Strings and Things"
s1 = "I am a string."
s2 = """I am also a "special" string. """
formatted = """I am a formated string


with newlines"""

typeof('a')
# Char

name = "Jane"
num_fingers = 10
num_toes = 10

println("Hello, my name is $name.")
println("I have $num_fingers fingers and $num_toes toes.")

println("That is $(num_fingers + num_toes) total digits.")

s3 = "How many dogs ";
s4 = "is too many dogs?";
dogs = 10

string(s3, s4)
# "How many dogs is too many dogs?"

string("I don't know, but ", dogs, " is too few.")
# "I don't know, but 10 is too few."

s3*s4
# "How many dogs is too many dogs?"

```

<!-- show strings -->
```diff 1:2 subtitle="Basic Strings"

```
<!-- show formatted strings -->
```diff 3:6 subtitle="Formatted Strings"

```
<!-- show char -->
```diff 8:9 subtitle="Char is not a String"

```
<!-- show interpolation -->
```diff 11:18 subtitle="String Interpolation"

```
<!-- show concat -->
```diff 20:31 subtitle="String Concatenation"

```

```erlang title="Data Structures"
my_pets = ("cat", "dog", "gecko")
my_pets[1])
# "cat"

my_pets[1] = "rock"
# a MethodError will occur, tuples are immutable

my_named_pets = (cat = "alice", dog = "bob", gecko = "charlie")
my_named_pets[1]
# "alice"
my_named_pets.gecko
# "charlie"

my_dictionary = Dict()
# Dict{Any, Any}
my_contacts = Dict("Jenny" => "867-5309", "Ghostbusters" => "555-2368")

my_contacts["Jenny"]
# "867-5309"

my_contacts["Kramer"] = "555-FILK"
my_contacts["Kramer"]
# "555-FILK"

pop!(my_contacts, "Kramer")

my_friends = ["Rachel", "Monica", "Phoebe", "Joey", "Chandler", "Ross"]
push!(my_friends, "Janice")
# results in ["Rachel", "Monica", "Phoebe", "Joey", "Chandler", "Ross", "Janice"]

pop!(my_friends)
# results in ["Rachel", "Monica", "Phoebe", "Joey", "Chandler", "Ross"]

my_friends_backup = my_friends
my_friends_backup[1] = "CHANGED"
my_friends
# ["CHANGED", "Monica", "Phoebe", "Joey", "Chandler", "Ross"]

my_friends_safe_backup = copy(my_friends)
# creates a new copy in memory
```

```diff 1[10:14],2[15:19],3[22:27],10:12

```

</CodeSurfer>

---

<CodeSurferColumns themes={[vsDark, github]}>

<Step>

```js
const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);
```

</Step>

<Step>

```js
const lorem = (ipsum, dolor, sit) => {
  const amet = dolor - ipsum;
  return consectetur.adipiscing(
    {
      elit: sed.eiusmod(sit - dolor) / amet + 2,
    },
    (tempor, incididunt) => ipsum + amet * incididunt
  );
};

const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);

const sed = (eiusmod, tempor, incididunt) => {
  const ut = tempor - eiusmod;
  return labore.et(
    {
      amet: dolore.magna(incididunt - tempor) / ut + 2,
    },
    (aliqua, elit) => eiusmod + ut * elit
  );
};
```

</Step>

</CodeSurferColumns>

---

docs:  
[codesurfer.pomb.us](https://codesurfer.pomb.us)
